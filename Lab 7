/*
CPSC121 Lab 7
Created by:  Brian Bui
Created on:  6 April 2016
Last edited:  6 April 2016
*/

#include "Fight.h"
#include<iostream>

Fight::Fight()
{
	turn = 0;
}

int Fight::takeTurn()
{
	if (foes[0].curHealth <= 0 && foes[1].curHealth <= 0)
	{
		return 4;
	}
	
	if (foes[0].curHealth <= 0)
	{
		return 3;
	}
	else if (foes[1].curHealth <= 0)
	{
		return 2;
	}
	else
	{
		return 1;
	}
}

void Fight::generateFighter(Combatant &fighter)
{
	for (int i = 0; i < 2; i++)
	{
		std::cout << "Please insert a name for this fighter:  " << std::endl;
		std::cin >> foes[i].name;
		foes[i].maxHealth = rand() % 20 + 21;
		foes[i].attackMin = rand() % 3 + 3;
		foes[i].attackRange = rand() % 5 + 5;
		foes[i].curHealth = foes[i].maxHealth;
		foes[i].winCount = 0;
		std::cout << foes[i].name << " HP:  " << foes[i].maxHealth << "  DMG:  " << foes[i].attackMin << " - " << (foes[i].attackMin + foes[i].attackRange) << std::endl;
	}
}

void Fight::getFighters()
{
	Combatant fighter;
	generateFighter(fighter);
}

void Fight::runFight()
{
	int player1Damage,
		player2Damage;

	player1Damage = rand() % foes[0].attackRange + foes[0].attackMin;
	player2Damage = rand() % foes[1].attackRange + foes[1].attackMin;
	foes[0].curHealth = foes[0].curHealth - player2Damage;
	foes[1].curHealth = foes[1].curHealth - player1Damage;
	
	std::cout << foes[0].name << " has dealt " << player1Damage << " damage to " << foes[1].name << std::endl;
	std::cout << foes[1].name << " has " << foes[1].curHealth << "HP" << std::endl;
	std::cout << foes[1].name << " has dealt " << player2Damage << " damage to " << foes[0].name << std::endl;
	std::cout << foes[0].name << " has " << foes[0].curHealth << "HP"<< std::endl;


	takeTurn();
}
